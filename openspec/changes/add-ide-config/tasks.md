## 1. 后端 API 开发

### 1.1 IDE 配置管理 API
- [ ] 1.1.1 创建配置应用 API `/api/ide/claude/apply`
  - [ ] 支持接收模型映射参数（haiku、sonnet、opus）
  - [ ] 实现配置文件备份逻辑到 `~/.claude/settings.json.aar.bak`
  - [ ] 生成符合 Claude Code 格式的 settings.json
  - [ ] 包含网关地址到 `ANTHROPIC_BASE_URL`
  - [ ] 设置默认模型和环境变量
  - [ ] 实现 JSON 格式验证
- [ ] 1.1.2 创建配置还原 API `/api/ide/claude/restore`
  - [ ] 检查备份文件是否存在
  - [ ] 从备份恢复原配置
  - [ ] 处理备份不存在的错误情况
- [ ] 1.1.3 创建配置状态查询 API `/api/ide/claude/status`
  - [ ] 返回当前应用状态
  - [ ] 返回模型映射关系
  - [ ] 返回网关地址和最后更新时间
- [ ] 1.1.4 创建可用模型查询 API `/api/ide/claude/available-models`
  - [ ] 调用模型管理服务获取可用模型
  - [ ] 按供应商分组
  - [ ] 过滤不兼容模型
- [ ] 1.1.5 创建配置历史 API `/api/ide/history`
  - [ ] 保存配置操作记录（数据库）
  - [ ] 返回最近 10 条记录
  - [ ] 按时间倒序排列

### 1.2 网关地址集成
- [ ] 1.2.1 读取当前网关监听地址
  - [ ] 从系统配置获取监听端口
  - [ ] 格式化为完整 HTTP URL
  - [ ] 返回给前端使用

### 1.3 数据持久化
- [ ] 1.3.1 创建配置历史表
  - [ ] 设计表结构（id、type、config、timestamp）
  - [ ] 添加索引加速查询
- [ ] 1.3.2 实现配置记录保存
  - [ ] 在应用/还原时自动写入
  - [ ] 包含操作类型、时间、配置摘要

## 2. 前端 UI 开发

### 2.1 IDE 配置页面
- [ ] 2.1.1 创建页面路由 `/ide`
  - [ ] 设置 Next.js 页面路由
  - [ ] 添加导航菜单入口
- [ ] 2.1.2 实现 TAB 切换组件
  - [ ] Claude 配置 TAB
  - [ ] Cursor 配置 TAB（占位符）
  - [ ] 激活状态样式

### 2.2 Claude 配置界面
- [ ] 2.2.1 创建模型选择下拉框
  - [ ] Haiku 模型选择
  - [ ] Sonnet 模型选择
  - [ ] Opus 模型选择
  - [ ] 从 API 加载可用模型列表
  - [ ] 默认值：Haiku=GLM-4.5-air、Sonnet=MiniMax-M2.1、Opus=GLM-4.7
- [ ] 2.2.2 实现应用开关（Switch）
  - [ ] 启用/禁用状态切换
  - [ ] 显示当前状态文本
  - [ ] 状态变更触发确认对话框
- [ ] 2.2.3 创建配置预览组件
  - [ ] 可折叠/展开
  - [ ] JSON 格式化显示
  - [ ] 语法高亮
  - [ ] 实时更新（监听模型选择变化）
- [ ] 2.2.4 实现状态展示区域
  - [ ] 显示当前应用状态
  - [ ] 显示最后更新时间
  - [ ] 显示当前网关地址
  - [ ] 显示当前模型映射

### 2.3 交互和反馈
- [ ] 2.3.1 实现确认对话框
  - [ ] 应时备份提示
  - [ ] 还时空提示
  - [ ] 取消操作支持
- [ ] 2.3.2 实现成功/失败提示
  - [ ] Toast 或模态框提示
  - [ ] 错误详情展示
- [ ] 2.3.3 实现加载状态
  - [ ] API 请求时显示 Spinner
  - [ ] 禁用操作按钮防止重复提交

### 2.4 响应式设计
- [ ] 2.4.1 移动端适配
  - [ ] TAB 标签页移动端布局
  - [ ] 配置预览移动端默认折叠
  - [ ] 输入框和按钮触控优化
- [ ] 2.4.2 平板和桌面端优化
  - [ ] TAB 标签页水平滚动
  - [ ] 预览区域合理高度

## 3. 测试

### 3.1 后端测试
- [ ] 3.1.1 API 单元测试
  - [ ] 测试配置应用接口
  - [ ] 测试配置还原接口
  - [ ] 测试配置状态查询
  - [ ] 测试可用模型查询
  - [ ] Mock 文件系统操作
- [ ] 3.1.2 集成测试
  - [ ] 测试完整配置流程
  - [ ] 测试备份和还原流程
  - [ ] 测试网关地址格式化
  - [ ] 测试 JSON 验证逻辑

### 3.2 前端测试
- [ ] 3.2.1 组件测试
  - [ ] 测试 TAB 切换逻辑
  - [ ] 测试模型选择交互
  - [ ] 测试应用开关状态
  - [ ] 测试配置预览更新
- [ ] 3.2.2 E2E 测试
  - [ ] 测试完整配置流程（从 UI 到 API）
  - [ ] 测试还原流程
  - [ ] 测试错误处理
  - [ ] 测试移动端响应式布局

### 3.3 手动测试
- [ ] 3.3.1 功能测试
  - [ ] 在开发环境完整测试配置流程
  - [ ] 在本地 Mac/Linux 环境测试文件操作
  - [ ] 验证生成的 settings.json 格式
  - [ ] 在 Claude Code 中验证配置生效
- [ ] 3.3.2 边界测试
  - [ ] 测试备份文件不存在的情况
  - [ ] 测试无权限写入的目录
  - [ ] 测试网络错误情况
  - [ ] 测试空模型选择

## 4. 文档和部署

### 4.1 用户文档
- [ ] 4.1.1 更新 README
  - [ ] 添加 IDE 配置功能说明
  - [ ] 添加使用截图（如适用）
  - [ ] 添加故障排查指南
- [ ] 4.1.2 添加配置示例
  - [ ] 提供常见 IDE 配置示例
  - [ ] 说明模型映射含义

### 4.2 部署准备
- [ ] 4.2.1 代码审查
  - [ ] 代码风格检查
  - [ ] 安全审查（文件权限、路径注入）
  - [ ] 性能优化检查
- [ ] 4.2.2 回归测试
  - [ ] 确保不破坏现有功能
  - [ ] 测试配置和其他功能并存
- [ ] 4.2.3 准备发布
  - [ ] 更新版本号
  - [ ] 准备发布说明
